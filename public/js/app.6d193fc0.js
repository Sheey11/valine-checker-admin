(function(t){function e(e){for(var n,o,r=e[0],c=e[1],l=e[2],u=0,h=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(h.length)h.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},s=[];function o(t){return r.p+"js/"+({about:"about"}[t]||t)+"."+{about:"90135998"}[t]+".js"}function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(t){var e=[],a=i[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise((function(e,n){a=i[t]=[e,n]}));e.push(a[2]=n);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=o(t);var l=new Error;s=function(e){c.onerror=c.onload=null,clearTimeout(u);var a=i[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",l.name="ChunkLoadError",l.type=n,l.request=s,a[1](l)}i[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"02be":function(t,e,a){},"034f":function(t,e,a){"use strict";var n=a("85ec"),i=a.n(n);i.a},"368f":function(t,e,a){"use strict";var n=a("02be"),i=a.n(n);i.a},"53b6":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},s=[],o=a("f64e"),r=a.n(o),c=(a("f8c4"),a("bc3a")),l=a.n(c);n["default"].use(r.a),n["default"].prototype.$http=l.a;var u={name:"App"},d=u,h=(a("034f"),a("2877")),m=Object(h["a"])(d,i,s,!1,null,null,null),p=m.exports,g=(a("d3b7"),a("8c4f")),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticClass:"title"},[t._v(t._s(t.title)),a("div",{staticClass:"login-wrap"},[a("zi-input",{attrs:{placeholder:"用户名",autofocus:"true"},model:{value:t.uname,callback:function(e){t.uname=e},expression:"uname"}}),a("zi-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:"密码",_type:"password"},model:{value:t.passwd,callback:function(e){t.passwd=e},expression:"passwd"}}),a("zi-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"success",loading:t.isLoading},on:{click:t.doLogin}},[t._v("登陆")])],1)])])},v=[],S=(a("25f0"),{name:"Home",data:function(){return{title:"Valine Checker",uname:"",passwd:"",isLoading:!1}},methods:{doLogin:function(){var t=this;this.isLoading=!0,this.$http.post("/login",{uname:this.uname,passwd:this.passwd}).then((function(e){200==e.data.code?t.$router.push("admin"):t.$Toast.danger(e.data.msg),t.isLoading=!1})).catch((function(e){t.$Toast.danger(e.toString()),t.isLoading=!1}))}}}),y=S,b=(a("e9f2"),Object(h["a"])(y,f,v,!1,null,"7e3dc231",null)),C=b.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%","max-width":"1008px",margin:"0 auto"}},[a("div",{staticStyle:{display:"flex"}},[a("div",[a("h1",[t._v("Valine Checker")]),t.loadingComents?a("vue-content-loading",{staticClass:"site-name",staticStyle:{width:"115px",height:"15px"},attrs:{width:7,height:1}},[a("rect",{attrs:{width:"7",height:"1",rx:"0.3",ry:"0.3"}})]):t._e(),t.loadingComents?t._e():a("p",{staticClass:"site-name"},[t._v(t._s(t.sitename))])],1),a("div",{staticClass:"valine-checker-status-wrapper"},[a("zi-dot",{attrs:{type:t.vcStatusDotType}}),a("p",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.valineCheckerStatus))])],1)]),a("div",{staticClass:"card"},[a("zi-tabs",[a("zi-tabs-item",{attrs:{label:"评论",value:"comment"}},[a("div",{staticClass:"comment-wrapper"},[t.loadingComents?a("vue-content-loading",{staticStyle:{width:"100%",height:"150px"},attrs:{width:1008,height:150}},[a("rect",{attrs:{width:"50",height:"20",x:"0",y:"0",rx:"5",ry:"5"}}),a("rect",{attrs:{width:"100",height:"20",x:"60",y:"0",rx:"5",ry:"5"}}),a("rect",{attrs:{width:"50",height:"20",x:"170",y:"0",rx:"5",ry:"5"}}),a("rect",{attrs:{width:"700",height:"80",x:"40",y:"30",rx:"10",ry:"10"}}),a("rect",{attrs:{width:"150",height:"30",x:"0",y:"120",rx:"5",ry:"5"}}),a("rect",{attrs:{width:"150",height:"30",x:"160",y:"120",rx:"5",ry:"5"}}),a("rect",{attrs:{width:"150",height:"30",x:"320",y:"120",rx:"5",ry:"5"}})]):t._e(),t._l(this.comments,(function(e){return a("comment",t._b({key:e.id,attrs:{isSpam:e.isSpam},on:{"update:isSpam":function(a){return t.$set(e,"isSpam",a)},"update:is-spam":function(a){return t.$set(e,"isSpam",a)},removed:t.removeComments}},"comment",e,!1))}))],2)]),a("zi-tabs-item",{attrs:{label:"日志",value:"logs"}},[a("div",{staticClass:"log-wrapper"},[a("div",{staticClass:"log-info-wrapper"},[a("p",[t._v(t._s(t.logStatus))]),a("zi-button",{staticStyle:{"margin-right":"0","margin-left":"auto"},attrs:{disabled:""==t.selectedFile,size:"mini"},on:{click:t.deleteSelectedLogs}},[t._v("删除选中日志")])],1),a("div",{staticClass:"log"},[a("zi-textarea",{staticClass:"log-text",attrs:{readonly:"true",value:t.log,rows:23}}),a("zi-files",{staticClass:"file-tree",attrs:{files:t.files},on:{"file-click":t.clickHandler}})],1)])]),a("zi-tabs-item",{attrs:{label:"Valine Checker",value:"vc"}},[a("zi-fieldset",{staticClass:"vc-status-content-wrapper",scopedSlots:t._u([{key:"footer",fn:function(){return[a("div",{staticClass:"vc-action-buttons"},[a("zi-button",{attrs:{size:"mini",type:"success",auto:"",disabled:"正在运行"==t.valineCheckerStatus},on:{click:t.launchVC}},[t._v("启动")]),a("zi-button",{attrs:{size:"mini",type:"danger",auto:"",disabled:"正在运行"!=t.valineCheckerStatus},on:{click:t.stopVC}},[t._v("停止")])],1)]},proxy:!0}])},[a("div",{staticStyle:{display:"flex"}},[a("zi-dot",{attrs:{type:t.vcStatusDotType}}),a("p",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.valineCheckerStatus))])],1)])],1)],1)],1)])},$=[],w=(a("a4d3"),a("e01a"),a("d28b"),a("a434"),a("b0c0"),a("3ca3"),a("ddb0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("zi-fieldset",{staticClass:"comment-container",scopedSlots:t._u([{key:"footer",fn:function(){return[a("div",{staticClass:"action-buttons"},[a("zi-button",{attrs:{size:"small"},on:{click:function(e){return t.openTab(t.url)}}},[t._v("查看")]),t.isSpam?t._e():a("zi-button",{attrs:{size:"small",disabled:t.isSpam,loading:t.isChangingStatus},on:{click:t.markAsSpam}},[t._v("标记为垃圾评论并隐藏")]),t.isSpam?a("zi-button",{attrs:{size:"small",loading:t.isChangingStatus},on:{click:t.markAsNormal}},[t._v("标记为正常评论并显示")]):t._e(),a("zi-button",{attrs:{size:"small",disabled:t.isSpam,loading:t.isChangingStatus},on:{click:t.hide}},[t._v("隐藏")]),a("zi-button",{attrs:{type:"danger",size:"small",loading:t.isChangingStatus},on:{click:t.whetherDeleteDialog}},[t._v("删除")]),a("zi-dialog",{attrs:{cancel:"取消",done:"确定",beforeDone:t.deleteComment},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("h5",{staticStyle:{"margin-bottom":"0px"}},[t._v("确定要删除这条评论吗？")]),a("p",{staticStyle:{margin:"0px 0 15px 0"}},[t._v("此操作不可逆。")]),a("zi-card",[a("div",{domProps:{innerHTML:t._s(t.comment)}})])],1)],1)]},proxy:!0}])},[a("div",{staticClass:"comment-info"},[a("zi-dot"),""==t.authorUrl?a("p",{staticClass:"sender"},[t._v(t._s(t.sender))]):a("a",{staticClass:"sender",attrs:{href:t.authorUrl,target:"_blank"}},[t._v(t._s(t.sender))]),""!=t.mail?a("zi-dot"):t._e(),""!=t.mail?a("p",[t._v(t._s(t.mail))]):t._e(),a("zi-dot"),a("p",[t._v(t._s(t.time))]),t.isSpam?a("zi-dot"):t._e(),t.isSpam?a("p",{staticClass:"spam"},[t._v("垃圾评论")]):t._e()],1),a("zi-card",{staticClass:"comment-content"},[a("div",{domProps:{innerHTML:t._s(t.comment)}})])],1)}),k=[],T={name:"Comment",props:{id:String,sender:String,mail:String,time:String,isSpam:Boolean,url:String,comment:String,authorUrl:String,removeMyself:Function},data:function(){return{visible:!1,isChangingStatus:!1,deleteComment:function(t){t(),this.$parent.$parent.remove()}}},events:["removed"],methods:{openTab:function(t){window.open(t)},markAsSpam:function(){var t=this;this.isChangingStatus=!0,this.$http.get("/api/action?type=markspam&id="+this.id).then((function(e){200==e.data.code?t.$Toast.success(e.data.msg):t.$Toast.danger(e.data.msg),t.isSpamProp=!0,t.isChangingStatus=!1})).catch((function(e){t.$Toast.danger(e.toString()),t.isChangingStatus=!1}))},hide:function(){var t=this;this.isChangingStatus=!0,this.$http.get("/api/action?type=hide&id="+this.id).then((function(e){200==e.data.code?t.$Toast.success(e.data.msg):t.$Toast.danger(e.data.msg),t.isChangingStatus=!1})).catch((function(e){t.$Toast.danger(e.toString()),t.isChangingStatus=!1}))},markAsNormal:function(){var t=this;this.isChangingStatus=!0,this.$http.get("/api/action?type=marknormal&id="+this.id).then((function(e){200==e.data.code?t.$Toast.success(e.data.msg):t.$Toast.danger(e.data.msg),t.isSpamProp=!1,t.isChangingStatus=!1})).catch((function(e){t.$Toast.danger(e.toString()),t.isChangingStatus=!1}))},whetherDeleteDialog:function(){this.visible=!0},remove:function(){var t=this;this.isChangingStatus=!0,this.$http.get("/api/action?type=delete&id="+this.id).then((function(e){200==e.data.code?(t.$Toast.success(e.data.msg),t.$emit("removed",t.id)):t.$Toast.danger(e.data.msg),t.isChangingStatus=!1})).catch((function(e){t.$Toast.danger(e.toString()),t.isChangingStatus=!1}))}},computed:{isSpamProp:{get:function(){return this.isSpamProp},set:function(t){this.$emit("update:isSpam",t)}}}},x=T,z=(a("368f"),Object(h["a"])(x,w,k,!1,null,"55f851a0",null)),V=z.exports,L=a("68ee"),j=a.n(L);n["default"].component("comment",V),n["default"].component("VueContentLoading",j.a);var O={name:"Admin",data:function(){return{sitename:"",comments:[],loadingComents:!0,log:"",logStatus:"正在加载...",files:[],selectedFile:"",valineCheckerStatus:"未知",vcStatusDotType:"primary",timer:0}},methods:{removeComments:function(t){for(var e=0;e<this.comments.length;e++)if(this.comments[e].id==t)return void this.comments.splice(e,1)},clickHandler:function(t){var e=this;this.selectedFile=t.name,this.$http.get("/api/logs/read?filename="+this.selectedFile).then((function(a){200==a.data.code?(e.log=a.data.data,e.logStatus=t.name):(e.$Toast.danger("读取日志失败，"+a.data.msg),e.logStatus="读取日志失败。")})).catch((function(t){e.$Toast.danger(t.toString()),e.logStatus="读取日志失败。"}))},deleteSelectedLogs:function(){var t=this;this.$http.get("/api/logs/delete?filename="+this.selectedFile).then((function(e){200==e.data.code?(t.listLogs(),t.$Toast.success("已删除。"),t.selectedFile=""):t.$Toast.danger("删除失败，"+e.data.msg)})).catch((function(e){t.$Toast.danger(e.toString())}))},listLogs:function(){var t=this;this.files.splice(0,this.files.length),this.$http.get("/api/logs/list").then((function(e){if(200==e.data.code){var a=!0,n=!1,i=void 0;try{for(var s,o=e.data.logs[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var r=s.value;t.files.push({type:"file",name:r})}}catch(c){n=!0,i=c}finally{try{a||null==o.return||o.return()}finally{if(n)throw i}}t.logStatus="加载完成。"}else t.$Toast.danger("获取日志失败，"+e.data.msg),t.logStatus="获取日志失败。"})).catch((function(e){t.$Toast.danger(e.toString()),t.logStatus="获取日志失败。"}))},showVCErrMsg:function(){var t=this;this.$http.get("/api/vc/errmsg"+this.selectedFile).then((function(e){t.$Toast.danger("错误信息："+e.data.msg)})).catch((function(e){t.$Toast.danger(e.toString())}))},loadVCStatus:function(){var t=this;this.$http.get("/api/vc/status").then((function(e){if(200==e.data.code)switch(e.data.status){case"sleeping":t.valineCheckerStatus="未运行",t.vcStatusDotType="primary";break;case"failure":t.valineCheckerStatus="运行失败",t.vcStatusDotType="danger",t.showVCErrMsg();break;case"error":t.valineCheckerStatus="运行出错",t.vcStatusDotType="danger",t.showVCErrMsg();break;case"running":t.valineCheckerStatus="正在运行",t.vcStatusDotType="success";break}else t.valineCheckerStatus="未知",t.$Toast.danger("获取 Valine Checker 状态失败："+e.data.msg)})).catch((function(e){t.$Toast.danger(e.toString())}))},launchVC:function(){var t=this;this.$http.get("/api/vc/launch"+this.selectedFile).then((function(e){200==e.data.code&&(t.valineCheckerStatus="running",t.$Toast.success("启动成功"))})).catch((function(e){t.$Toast.danger(e.toString())}))},stopVC:function(){var t=this;this.$http.get("/api/vc/stop"+this.selectedFile).then((function(e){200==e.data.code?(t.loadVCStatus(),t.$Toast.success("已停止")):(t.loadVCStatus(),t.$Toast.danger("操作失败: "+e.data.msg))})).catch((function(e){t.$Toast.danger(e.toString())}))}},mounted:function(){var t=this;this.$http.get("/api/comments").then((function(e){200==e.data.code?(t.loadingComents=!1,t.sitename=e.data.site_name,t.comments=e.data.comments):t.$Toast.danger("获取评论失败，"+e.data.msg)})).catch((function(e){t.$Toast.danger(e.toString())})),this.listLogs(),this.loadVCStatus(),this.timer?clearInterval(this.timer):this.timer=setInterval((function(){t.loadVCStatus()}),5e3)},destroyed:function(){clearInterval(this.timer)}},P=O,D=(a("5c5b"),Object(h["a"])(P,_,$,!1,null,"6ce46d09",null)),E=D.exports;n["default"].use(g["a"]);var F=[{path:"/",name:"Valine Checker",component:C},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/admin",name:"管理",component:E}],M=new g["a"]({mode:"history",base:"/",routes:F}),A=M;n["default"].config.productionTip=!1,new n["default"]({render:function(t){return t(p)},router:A}).$mount("#app")},"5c5b":function(t,e,a){"use strict";var n=a("53b6"),i=a.n(n);i.a},"85ec":function(t,e,a){},"99c9":function(t,e,a){},e9f2:function(t,e,a){"use strict";var n=a("99c9"),i=a.n(n);i.a}});
//# sourceMappingURL=app.6d193fc0.js.map